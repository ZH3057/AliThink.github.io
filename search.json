[{"title":"联通旧事","url":"http://blog.alithink.com/2016/07/08/联通旧事/","content":"<blockquote>\n<p>时间：2011.3~2013.6</p>\n</blockquote>\n<h3 id=\"初来乍到\"><a href=\"#初来乍到\" class=\"headerlink\" title=\"初来乍到\"></a>初来乍到</h3><blockquote>\n<p>出场人物代号简介：<br>我：刚出茅庐的Java小菜鸟</p>\n</blockquote>\n<p>　　那是一个属于Java的年代（^_^其实现在依然如此）。但造化弄人一直没有长时间从事相关工作。在浪潮实习的时候用了C#，在另一个伤心之地（实在不想提。。唉。。）用了一盏茶的J2EE和PB，而后我来到了联通。<br>　　面试时问的问题都是J2EE相关的，于是顺利的加入了经分数据组😂（跟J2EE几乎没半毛钱关系，这就是命吧，不过现在回想，还是要感谢一下命运之神）。时间太久，忘记当时的心情了，只依稀记得当时坐到工位上，时而会慨叹：“也许我就要跟数据库、etl和shell搞一辈子了吧”。</p>\n<h3 id=\"误打误撞\"><a href=\"#误打误撞\" class=\"headerlink\" title=\"误打误撞\"></a>误打误撞</h3><blockquote>\n<p>出场人物代号简介:<br>川哥：掌分项目的发起者<br>老孟：掌分项目组长以及同甘共苦过的兄弟</p>\n</blockquote>\n<p>　　同事领导都挺好，身边也有不少同学，所以日子过得还算温馨舒适。然后突然有一天命运的轨迹就发生了改变，在集团常驻的川哥发起了掌上经分项目（仅限iOS端）。  </p>\n<blockquote>\n<p>回想当时iOS生态圈的境况为：<br>目标设备：iPhone3G、3GS、iPad1<br>iOS版本: iOS4.x<br>开发设备：iMac、黑苹果(t410黑)<br>开发环境：那是一个Xcode与Interface builder分离的时代</p>\n</blockquote>\n<p>　　迷迷瞪瞪的就跟老孟被安排进了掌分项目组，当时对于OSX（现在应该叫macOS啦）和iOS一无所知，唯一的学习资料是一本iPhone开发书籍（名字忘掉了，这本书其中之一的作者以外包团队领头人的身份加入了项目）。项目的第一个版本主要由外包团队负责研发，但是我跟老孟需要尽快的融入进来，借助项目快速上手iOS开发，然后将项目接手过来（最大限度的节省外包费用，😂据说最后也没有把外包团队的费用完全结清）。</p>\n<h3 id=\"小有所成\"><a href=\"#小有所成\" class=\"headerlink\" title=\"小有所成\"></a>小有所成</h3><blockquote>\n<p>军军：外包团队主力开发<br>苟工：外包团队领头人</p>\n</blockquote>\n<p>　　那是一个几乎没有轮子的时代，或者说当时都还没有使用过github的我没有具备找轮子的能力。所以几乎所有的东西都是从零做起，走过的坑不少，但是收获也很大，很快就可以上手一些简单模块的开发了。说起成长的喜悦，记得兄弟们一起加班时的免费餐补报销，加班九点之后的打车报销以及写出bug后大家开玩笑的声讨书（那超大字号的白底黑字，打开屏幕吓出一身冷汗来）。<br>　　这里要感谢下苟工当时对于delegate的悉心讲解，感谢军军同志对于我冒出的各种问题的耐心解答。\n　　</p>\n<h3 id=\"北京你好\"><a href=\"#北京你好\" class=\"headerlink\" title=\"北京你好\"></a>北京你好</h3><blockquote>\n<p>博士：名副其实的博士，会议室加班常客，只因为大家都叫他博士，导致往往有些人都不记得他叫什么名字了，但是我记得，因为他跟托塔李天王重名^_^<br>文哥：目前公司的领导</p>\n</blockquote>\n<p>　　当领导让你出差，但是又不明确说多少天的时候，你就应该明白我可能一时半会回不来了😂。就这样，北京，我来了。<br>　　在项目的初版汇报通过之后，我们来到了北京金融街21号-联通集团总部，开始了现场开发支持工作。想象过一个人提着iMac盒子出差的感受吗，回想起来，好心酸，胳膊也好酸。。。<br>　　常驻联通会议室之后，发现一个真相，原来工作之后需要掌握的一项重要技能就是做PPT。逐级的汇报，不停的过片子，修改字眼与内容的组织是博士经常加班到很晚的原因。记得我们晚上从集团运动区打完球回来，还能经常享受到博士亲切地问候。<br>　　博士给我留下了很深刻的印象，跟现在的文哥有一拼，为人温文尔雅，专业知识过硬，处事细致全面，知识面很广，仿佛所有的东西都有所涉猎并且见解独特。（这里声明下，绝无拍马屁之嫌）<br>　　集团的食堂也给我留下了不少美味的回忆，超值的早餐、便宜好吃的肉龙等等，现在想想当时没有胖起来真是个奇迹。（然而在我的不懈努力下，现在终于还是胖起来了）\n　　</p>\n<h3 id=\"重新来过\"><a href=\"#重新来过\" class=\"headerlink\" title=\"重新来过\"></a>重新来过</h3><p>　　终于热更新这个问题被提出来了，Native开发的最大不足其实就是这里了。当时没有如今大行其道的JSPatch、风风火火的React Native，于是开发一时进入了瓶颈。想过不少方案都没有很好的解决这个问题，于是川哥决定借助现有的成熟平台换一个架构重新来过。<br>　　经过几轮讨论之后，确定了MicroStrategy的方案，至今跟厂商的几个伙伴还保持着联系，毕竟国内懂得定制化改造MSTR SDK的iOS开发者估计不算多，当时一起讨论了不少问题，还乔装成他们的技术人员去帮他们紧急搞定了一个项目^_^。<br>　　实体、事实、度量、选择器、报表、文档、智能立方体、缓存、权限。。。接触了不少商业智能常见的概念与功能。起初是比较排斥的，因为借助第三方平台就基本失去了实际编写功能代码的机会了（因为涉及二次开发，针对MSTR SDK套壳的部分还是需要编写的）。但转念一想既然改变的势头已无法扭转，那只有硬着头皮顺流而行了。因为处女座的特质，让我在很短的时间内就掌握了MSTR的基本功能，有疑惑的地方就联系厂商技术支持，所以很快MSTR版本的掌分就搞出来了。</p>\n<blockquote>\n<p>心里话：<br>不知道现在掌分的状况如何了，个人一直觉得中途换成MSTR的方案并不是一个明智的选择，原因如下：  </p>\n<ol>\n<li>APP其实往往不需要彻底的动态性，内容的动态性往往可以通过产品向的方案进行解决。  </li>\n<li>MSTR的权限以及缓存模型是基于用户的，而用户又涉及到license的费用计算，一旦涉及到费用就会衍生出不少扯皮的事情；反观自主开发的APP这部分配置就非常灵活。  </li>\n<li>这点我觉得最重要，那就是APP存在的重要意义之一其实就是她极致的用户体验，如果在动态性与极致用户体验之一做个权衡的话，会毫不犹豫的以保证后者为先。（尤其在企业应用的范畴内，省掉了App Store的审核成本，版本的迭代速度可以非常快，版本的更新提示反而可以算作是对于用户的一种引导）</li>\n</ol>\n</blockquote>\n<h3 id=\"北京再见\"><a href=\"#北京再见\" class=\"headerlink\" title=\"北京再见\"></a>北京再见</h3><blockquote>\n<p>朋友们：东儿、芳芳*2、小杜、传奇、夺儿等（排名不分先后）</p>\n</blockquote>\n<p>　　来到北京最开心的回忆就是跟一起出差的朋友们几乎游遍了京城所有可玩的地方。故宫、天坛、长城、颐和园、南锣鼓巷、后海、雍和宫、国家博物馆、国家图书馆、鸟巢、水立方、清华北大、前门、王府井、西单、三里屯（优衣库试衣间）等。借老孟跟东儿的单反留下了不少记忆的片段，现在还经常看一下当时的照片，回味当初那份单纯的快乐，这份快乐只属于那段日子，那个年纪。（着重提一下，菜市口附近教子胡同里面的一个麻辣烫小店，里面的辣椒太tm过瘾了。。。）<br>　　唯一不变的就是变化，突然因为项目成本的原因（还有一些其他原因）研发团队就回到了济南。模式变为了济南团队研发结束提交变更，留守在集团的老孟负责向领导进行汇报安装。  </p>\n<blockquote>\n<p>说说这段日子的收获：  </p>\n<ol>\n<li>扩展视野、吃喝玩乐、结交朋友算是一方面😜。  </li>\n<li>中途也参加了一些iOS精通类以及用户体验类的培训，总算是给我这个自学党补了补漏。  </li>\n<li>接触MSTR，熟悉了主流报表平台的常用概念以及构建流程；通过对SDK的二次开发，为了实现一些奇葩需求，了解了不少iOS相关的黑魔法（swizzling、runtime等）</li>\n</ol>\n</blockquote>\n<h3 id=\"联通再见\"><a href=\"#联通再见\" class=\"headerlink\" title=\"联通再见\"></a>联通再见</h3><p>　　人忙起来往往没时间去想太多其他事情，可一旦闲下来，然后再有不爽的任务压过来时，就往往会思考权衡下自己将来要走的路了。当掌分的工作暂时告一段落，领导打算安排去做其他数据加工审核相关工作的时候，心里总是有种排斥感。那段时间心里总是有个声音在问自己，将来到底想做什么。联通的生活确实很安逸舒适，但自己内心坚持移动端研发方向，所以最后还是选择了离开。    </p>\n<blockquote>\n<p>后记：<br>在联通工作的这段日子，结识了伙伴，扩展了视野，最重要的是确定了自己下一步该走的路。<br>感谢那段时光，感谢那段日子有你们相伴。年轻万岁，青春无悔。</p>\n</blockquote>\n"},{"title":"《禅与 Objective-C 编程艺术》读书拾遗","url":"http://blog.alithink.com/2016/07/01/《禅与 Objective-C 编程艺术》读书拾遗/","content":"<blockquote>\n<p>纯粹拾遗性质的读书笔记，只记录知识体系尚模糊的内容<br>原文链接：<a href=\"https://github.com/oa414/objc-zen-book-cn#%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B\" target=\"_blank\" rel=\"external\">《禅与 Objective-C 编程艺术》</a></p>\n</blockquote>\n<h3 id=\"1-条件语句\"><a href=\"#1-条件语句\" class=\"headerlink\" title=\"1.条件语句\"></a>1.条件语句</h3><ul>\n<li>善用return, 将主流程从分支中脱离</li>\n</ul>\n<h3 id=\"2-命名\"><a href=\"#2-命名\" class=\"headerlink\" title=\"2.命名\"></a>2.命名</h3><ul>\n<li>常量 static NSString * const ZOCCacheNotification(尽量避免使用宏，除非真的需要用到她)</li>\n<li>with连接 取代and</li>\n<li>字面量<ul>\n<li>不可变集合尽量使用字面量赋值</li>\n<li>可变集合避免[@[] mutableCopy]</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-类\"><a href=\"#3-类\" class=\"headerlink\" title=\"3.类\"></a>3.类</h3><ul>\n<li>类命名规范：ZOC(前缀)+Twitter(子类)+NetworkClient(父类)</li>\n<li>推荐代码组织顺序：<ul>\n<li>dealloc(MRC)</li>\n<li>init<ul>\n<li>designated initializer</li>\n<li>secondary initializer</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>init的可失败性</li>\n<li>提供自己的初始化函数的三个步骤<ul>\n<li>定义你的designated initializer, 确保调用了直接超类designated initializer</li>\n<li>重载直接超类的designated initializer。调用你的新的designated initializer</li>\n<li>为新的designated initializer写文档</li>\n</ul>\n</li>\n<li><p>类簇：</p>\n<ul>\n<li><p>简单示例：</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@implementation ZOCKintsugiPhotoViewController</span><br><span class=\"line\"></span><br><span class=\"line\">- (id)initWithPhotos:(NSArray *)photos</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  \t\tif ([self isMemberOfClass:ZOCKintsugiPhotoViewController.class]) &#123;</span><br><span class=\"line\">      \t\tself = nil;</span><br><span class=\"line\"></span><br><span class=\"line\">      \t\tif ([UIDevice isPad]) &#123;</span><br><span class=\"line\">          \t\tself = [[ZOCKintsugiPhotoViewController_iPad alloc] initWithPhotos:photos];</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">      \t\telse &#123;</span><br><span class=\"line\">          \t\tself = [[ZOCKintsugiPhotoViewController_iPhone alloc] initWithPhotos:photos];</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">      \t\treturn self;</span><br><span class=\"line\">  \t\t&#125;</span><br><span class=\"line\">  \t\treturn [super initWithNibName:nil bundle:nil];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@end</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>单例模式应该运用于类及类的接口趋向于作为单例来使用的情况</p>\n</li>\n<li>属性：<ul>\n<li>NSString *text</li>\n<li>总应该使用getter和setter</li>\n<li>永远不要在init方法里面用getter和setter(dealloc中同样需要注意)</li>\n<li>使用点符号会让表达更加清晰并且帮助区分属性访问和方法调用</li>\n<li>属性定义推荐格式：@property (nonatomic, readwrite, copy) NSString *name;</li>\n<li>BOOL类型推荐格式：@property (assign, getter=isEditable) BOOL editable;</li>\n<li>通过readonly的属性暴露类内部可变属性的值</li>\n</ul>\n</li>\n<li><p>相等性示例：</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (BOOL)isEqual:(id)object &#123;</span><br><span class=\"line\">   \tif (self == object) &#123;</span><br><span class=\"line\">     \t\treturn YES;</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   \tif (![object isKindOfClass:[ZOCPerson class]]) &#123;</span><br><span class=\"line\">     \t\treturn NO;</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   \treturn [self isEqualToPerson:(ZOCPerson *)object];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- (BOOL)isEqualToPerson:(Person *)person &#123;</span><br><span class=\"line\">   \tif (!person) &#123;</span><br><span class=\"line\">       \treturn NO;</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   \tBOOL namesMatch = (!self.name &amp;&amp; !person.name) ||</span><br><span class=\"line\">                      [self.name isEqualToString:person.name];</span><br><span class=\"line\">   \tBOOL birthdaysMatch = (!self.birthday &amp;&amp; !person.birthday) ||</span><br><span class=\"line\">                          [self.birthday isEqualToDate:person.birthday];</span><br><span class=\"line\"></span><br><span class=\"line\"> \t\treturn haveEqualNames &amp;&amp; haveEqualBirthdays;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-Category\"><a href=\"#4-Category\" class=\"headerlink\" title=\"4.Category\"></a>4.Category</h3><ul>\n<li>category方法前加上自己的小写前缀以及下划线，避免重名的category方法的覆盖不确定性</li>\n<li>利用category创建方法分组可以用来更好地进行不同功能的表示，并且把类打破在更多自我包含的组成部分里</li>\n</ul>\n<h3 id=\"5-Protocols\"><a href=\"#5-Protocols\" class=\"headerlink\" title=\"5.Protocols\"></a>5.Protocols</h3><ul>\n<li>当实现一个protocol你总应该坚持里氏替换原则。这个原则是：你应该可以取代任意接口实现，而不用改变客户端或者相关实现</li>\n</ul>\n<h3 id=\"6-NSNotification\"><a href=\"#6-NSNotification\" class=\"headerlink\" title=\"6.NSNotification\"></a>6.NSNotification</h3><ul>\n<li>通知名定义示例：extern NSString * const ZOCFooDidBecomeBarNotification;</li>\n</ul>\n<h3 id=\"7-代码组织\"><a href=\"#7-代码组织\" class=\"headerlink\" title=\"7.代码组织\"></a>7.代码组织</h3><ul>\n<li>清晰地组织代码和规范地进行定义，是你对自己以及其他阅读代码的人的尊重</li>\n<li>善用代码块({})</li>\n<li><p>pragma示例：</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (void)dealloc &#123; /* ... */ &#125;</span><br><span class=\"line\">- (instancetype)init &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - View Lifecycle （View 的生命周期）</span><br><span class=\"line\"></span><br><span class=\"line\">- (void)viewDidLoad &#123; /* ... */ &#125;</span><br><span class=\"line\">- (void)viewWillAppear:(BOOL)animated &#123; /* ... */ &#125;</span><br><span class=\"line\">- (void)didReceiveMemoryWarning &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - Custom Accessors （自定义访问器）</span><br><span class=\"line\"></span><br><span class=\"line\">- (void)setCustomProperty:(id)value &#123; /* ... */ &#125;</span><br><span class=\"line\">- (id)customProperty &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - IBActions  </span><br><span class=\"line\"></span><br><span class=\"line\">- (IBAction)submitData:(id)sender &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - Public</span><br><span class=\"line\"></span><br><span class=\"line\">- (void)publicMethod &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - Private</span><br><span class=\"line\"></span><br><span class=\"line\">- (void)zoc_privateMethod &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - UITableViewDataSource</span><br><span class=\"line\"></span><br><span class=\"line\">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123; /* ... */ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - ZOCSuperclass</span><br><span class=\"line\"></span><br><span class=\"line\">// ... 重载来自 ZOCSuperclass 的方法</span><br><span class=\"line\"></span><br><span class=\"line\">#pragma mark - NSObject</span><br><span class=\"line\"></span><br><span class=\"line\">- (NSString *)description &#123; /* ... */ &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>#pragma unused</p>\n</li>\n<li>#error #warning</li>\n</ul>\n<h3 id=\"8-对象间的通讯\"><a href=\"#8-对象间的通讯\" class=\"headerlink\" title=\"8.对象间的通讯\"></a>8.对象间的通讯</h3><ul>\n<li>Block<ul>\n<li>把需要提供的数据和错误信息整合到一个单独block中，比分别提供成功和失败的block要好<ul>\n<li>若objects不为nil,则error必须为nil</li>\n<li>若objects为nil,则error必须不为nil</li>\n</ul>\n</li>\n<li>三种方案的讨论（循环引用相关）</li>\n</ul>\n</li>\n<li>委托和数据源<ul>\n<li>委托模式：事件发生的时候，委托者需要通知代理者</li>\n<li>数据源模式：委托者需要从数据源对象拉去数据<ul>\n<li>重载代理方法：instancesRespondToSelector</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"9-面向切面编程\"><a href=\"#9-面向切面编程\" class=\"headerlink\" title=\"9.面向切面编程\"></a>9.面向切面编程</h3><ul>\n<li>aspects</li>\n<li>应用举例 统计与日志：<ul>\n<li>预先留一个统计的配置文件，记录需要统计的类、方法跟标签</li>\n<li>初始化时统一埋点</li>\n</ul>\n</li>\n</ul>\n"},{"title":"BI APP图形库选型","url":"http://blog.alithink.com/2016/06/28/BI APP图形库选型/","content":"<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><p>BI中会涉及到不少图形可视化的应用，因为考虑到APP用户体验方面的需求（移动端版本主要面向集团领导使用），BI APP主要采用Native的图形可视化解决方案（当然Swift优先^_^）。</p>\n<h3 id=\"涉及的图形类型\"><a href=\"#涉及的图形类型\" class=\"headerlink\" title=\"涉及的图形类型\"></a>涉及的图形类型</h3><p><img src=\"http://alithink.com/img/3bi/1.png\" alt=\"BI show.png\"></p>\n<p>BI 中的各种图形图表都封装成了对应的卡片类型，根据接口的卡片类型描述动态生成对应的数据卡片进行展示。</p>\n<h3 id=\"开源库选型\"><a href=\"#开源库选型\" class=\"headerlink\" title=\"开源库选型\"></a>开源库选型</h3><h4 id=\"1-Charts\"><a href=\"#1-Charts\" class=\"headerlink\" title=\"1.Charts\"></a>1.Charts</h4><blockquote>\n<p>传送门：<a href=\"https://github.com/danielgindi/Charts\" target=\"_blank\" rel=\"external\">https://github.com/danielgindi/Charts</a>  </p>\n</blockquote>\n<h5 id=\"应用场景：\"><a href=\"#应用场景：\" class=\"headerlink\" title=\"应用场景：\"></a>应用场景：</h5><p>主力图形库，常规图形的展示。</p>\n<h5 id=\"优势：\"><a href=\"#优势：\" class=\"headerlink\" title=\"优势：\"></a>优势：</h5><ul>\n<li>图形类型支持覆盖率较高，基本涵盖了所有常用的图形类型（组合图待完善中…）。</li>\n<li>文档较完备，且iOS、Android平台接口一致，迁移成本低</li>\n<li>图形库热度高，持续更新中。</li>\n<li>较为优雅的动画支持、默认数据展示区域的控制、各种展示细节的灵活控制等。</li>\n</ul>\n<h4 id=\"2-ESArcProgressView\"><a href=\"#2-ESArcProgressView\" class=\"headerlink\" title=\"2.ESArcProgressView\"></a>2.ESArcProgressView</h4><blockquote>\n<p>传送门：<a href=\"https://github.com/e-sites/ESArcProgressView\" target=\"_blank\" rel=\"external\">https://github.com/e-sites/ESArcProgressView</a>  </p>\n</blockquote>\n<h5 id=\"应用场景：-1\"><a href=\"#应用场景：-1\" class=\"headerlink\" title=\"应用场景：\"></a>应用场景：</h5><p><img src=\"http://alithink.com/img/3bi/2.png\" alt=\"Circle.png\"></p>\n<p>多层环形图（暂时这么称呼她吧）<br>其实是仿照的Apple Watch的Activity，不过确实比纯粹的柱状图更具美感一些^_^。</p>\n<h5 id=\"优势：-1\"><a href=\"#优势：-1\" class=\"headerlink\" title=\"优势：\"></a>优势：</h5><ul>\n<li>其它的类似轮子还真没找到。。。</li>\n<li>支持简单动画，不过需要手动处理下timer的runloop mode的问题。</li>\n</ul>\n<h4 id=\"3-XCL-Charts\"><a href=\"#3-XCL-Charts\" class=\"headerlink\" title=\"3.XCL-Charts\"></a>3.XCL-Charts</h4><blockquote>\n<p>传送门：<a href=\"https://github.com/xcltapestry/XCL-Charts\" target=\"_blank\" rel=\"external\">https://github.com/xcltapestry/XCL-Charts</a> </p>\n</blockquote>\n<h5 id=\"应用场景：-2\"><a href=\"#应用场景：-2\" class=\"headerlink\" title=\"应用场景：\"></a>应用场景：</h5><p><img src=\"http://alithink.com/img/3bi/3.png\" alt=\"android circle.png\"></p>\n<p>Android的多层环形图解决方案，XCL也是一个较为完备的Android图形库，不过相较来说库的成熟度没有Charts高，一些细节功能也存在一定程度的缺失。</p>\n<h3 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h3><p>这里主要就Charts的问题解决方案进行一些分享：</p>\n<h4 id=\"1-展示图形中的最后几个元素\"><a href=\"#1-展示图形中的最后几个元素\" class=\"headerlink\" title=\"1. 展示图形中的最后几个元素\"></a>1. 展示图形中的最后几个元素</h4><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//显示可视区域的元素个数</span></span><br><span class=\"line\">chartView?.setVisibleXRangeMaximum(<span class=\"number\">6</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\"><span class=\"comment\">/*</span><br><span class=\"line\"> * moveViewToX存在bug无法正确切换位置</span><br><span class=\"line\"> * 调用此方法的前提条件是需要预先提供一个确定的frame</span><br><span class=\"line\"> * xIndex为显示到的x元素的序列</span><br><span class=\"line\"> */</span></span><br><span class=\"line\">chartView?.moveViewToAnimated(xIndex: <span class=\"type\">CGFloat</span>(xVals.<span class=\"built_in\">count</span> - <span class=\"number\">1</span>), yValue: <span class=\"number\">0</span>, axis: <span class=\"type\">ChartYAxis</span>.<span class=\"type\">AxisDependency</span>.<span class=\"type\">Left</span>, duration: <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p>这里setVisibleXRangeMaximum设置的数目在grouped柱状图配置的时候记得要乘以单位组内柱子的数目并包含组之间间隔的空间（往往间隔的空间也算做一个柱子）。</p>\n<h4 id=\"2-完整显示x轴所有的元素标签\"><a href=\"#2-完整显示x轴所有的元素标签\" class=\"headerlink\" title=\"2. 完整显示x轴所有的元素标签\"></a>2. 完整显示x轴所有的元素标签</h4><p>Charts默认自动计算相邻x轴元素标签的距离, 控制x轴部分标签的隐藏以达到较好的现实效果。但实际需求中往往会要求展示所有x轴的元素标签，那么就可以通过以下配置禁用默认的计算。<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xAxis?.setLabelsToSkip(<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"3-设置为可拖动的图形与tableview的滑动存在冲突\"><a href=\"#3-设置为可拖动的图形与tableview的滑动存在冲突\" class=\"headerlink\" title=\"3. 设置为可拖动的图形与tableview的滑动存在冲突\"></a>3. 设置为可拖动的图形与tableview的滑动存在冲突</h4><p>暂时的解决办法是在可拖动的图形顶部覆盖一层隐藏层，需要看全局数据的用户需要先进行一步点击才能进行图形的拖动操作。</p>\n<h3 id=\"存在的不足\"><a href=\"#存在的不足\" class=\"headerlink\" title=\"存在的不足\"></a>存在的不足</h3><h4 id=\"1-组合图包含grouped柱状图时存在bug\"><a href=\"#1-组合图包含grouped柱状图时存在bug\" class=\"headerlink\" title=\"1. 组合图包含grouped柱状图时存在bug\"></a>1. 组合图包含grouped柱状图时存在bug</h4><p><img src=\"http://alithink.com/img/3bi/4.png\" alt=\"problem.png\"><br><img src=\"http://alithink.com/img/3bi/5.png\" alt=\"solution.png\"><br>尚未解决，暂时只能将grouped柱状图跟线形图分开成两个图进行展示。。。<br>或者研究下liuxuan30的这个PR<br><a href=\"https://github.com/danielgindi/Charts/issues/1159#issuecomment-228954675\" target=\"_blank\" rel=\"external\">issue传送门</a></p>\n<h4 id=\"2-堆积图缺失线性堆积图\"><a href=\"#2-堆积图缺失线性堆积图\" class=\"headerlink\" title=\"2. 堆积图缺失线性堆积图\"></a>2. 堆积图缺失线性堆积图</h4><p>目前只提供柱状堆积图的支持。</p>\n<h4 id=\"3-ChartMarker堆积图功能缺失\"><a href=\"#3-ChartMarker堆积图功能缺失\" class=\"headerlink\" title=\"3. ChartMarker堆积图功能缺失\"></a>3. ChartMarker堆积图功能缺失</h4><p>堆积图的ChartMarker目前只能展示堆积后的总值，而不能展示分项的值。</p>\n<h3 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h3><p>目前的这套方案可以满足基本的数据可视化需求，对于一些较为复杂灵活的图形展示需求，也可以封装一个单独的web类型的卡片，对于这部分需求采用web相关的图形可视化解决方案进行处理。</p>\n"},{"title":"工作与生活的平衡","url":"http://blog.alithink.com/2016/06/11/工作与生活的平衡/","content":"<p>对应视频的传送门：</p>\n<p><a href=\"http://open.163.com/movie/2011/2/D/L/M77U1DAGR_M77U1L2DL.html\" target=\"_blank\" rel=\"external\">如何实现工作与生活的平衡</a></p>\n<h3 id=\"平衡的四个关键\"><a href=\"#平衡的四个关键\" class=\"headerlink\" title=\"平衡的四个关键\"></a>平衡的四个关键</h3><h4 id=\"1-有些职业的选择与生活具有不可调和性\"><a href=\"#1-有些职业的选择与生活具有不可调和性\" class=\"headerlink\" title=\"1.有些职业的选择与生活具有不可调和性\"></a>1.有些职业的选择与生活具有不可调和性</h4><p>这种不可调和跟周五允许不穿工装、育儿假等生活福利没有多大联系。很多人一直从事着自己痛恨着的工作，目的只是为了买一些没有多大用处的东西，以此博得自己的邻居朋友的羡慕而已。  </p>\n<blockquote>\n<p>职业的选择很重要，找到一份自己热爱并且可以驾驭掌控的工作是解决平衡问题的一个关键。</p>\n</blockquote>\n<h4 id=\"2-做平衡问题的掌舵者\"><a href=\"#2-做平衡问题的掌舵者\" class=\"headerlink\" title=\"2.做平衡问题的掌舵者\"></a>2.做平衡问题的掌舵者</h4><p>政府跟公司是无法帮你解决这个问题的，只能靠自己，自己不主动，最终的结果就不尽如意。所有商业公司其实本质上都是榨取你的价值以及尽可能的逃避责任，因此我们要尽可能的设定并加固自己生活中的各种界限，当工作的范畴越界时，主动的去解决与平衡。</p>\n<blockquote>\n<p>主动权在自己手中，理性的划分工作与生活的边界，才能为平衡提供依据。</p>\n</blockquote>\n<h4 id=\"3-合理控制理想平衡的时间周期\"><a href=\"#3-合理控制理想平衡的时间周期\" class=\"headerlink\" title=\"3.合理控制理想平衡的时间周期\"></a>3.合理控制理想平衡的时间周期</h4><p>这里慨叹下演讲者的身体素质（一天四次。。。），每个人对于理想中一天的定义不尽相同，但往往会发现其实这些想做的事情二十四小时的时间容量是不够的。有些人往往会想着等退休之后再好好享受生活，等孩子大了之后就可以有时间好好享受生活，其实这样就走入了另一个极端。一天太短，退休又太长，肯定会有折中的办法。</p>\n<blockquote>\n<p>有了好的规划，就要尽快实施，不要拖延，也不要安排的过于紧凑，制定一个合理的规划周期对于平衡来说也很重要。</p>\n</blockquote>\n<h4 id=\"4-平衡不只是工作之余健健身\"><a href=\"#4-平衡不只是工作之余健健身\" class=\"headerlink\" title=\"4.平衡不只是工作之余健健身\"></a>4.平衡不只是工作之余健健身</h4><p>很多人上班族，往往下班后以健身的方式来维持健康以及缓解压力，这本身是没问题的，但是只是健身其实还不够。很多人会说，我连健身的时间都没有，再让我去做其它事情就更不可能了。这里演讲者讲述了他与自己儿子的某一天的生活经历，大致是他提前下班去接儿子放学，然后带他在街边做了一些简单的户外游乐，然后带儿子去咖啡店吃了一些东西，最后回家给儿子洗澡给他讲故事陪他睡觉，等他吻过儿子的额头准备要离开儿子的房间时，儿子对他说：“爸爸，这是我过得最棒的一天”。</p>\n<blockquote>\n<p>小事并非无关紧要，在处理平衡问题时并不需要大张旗鼓的颠覆式的行动，也许多注意一些细节，多一些关心体贴与陪伴就够了。</p>\n</blockquote>\n<p>最后讲述者呼吁大家都能正确的处理平衡问题，这样也许会改变目前社会上单纯以个人财产衡量成功的观念。成功应该有一个更具平衡行和思想性的定义，即一个美好的生活的实现。</p>\n<blockquote>\n<p>共勉，为“美好生活“而努力。</p>\n</blockquote>\n"},{"title":"cocoapods私有仓库封装过程中的思考","url":"http://blog.alithink.com/2016/06/04/cocoapods私有仓库封装过程中的思考/","content":"<blockquote>\n<p>背景：随着公司相关APP项目的开展，公用框架的创建与维护越发显得迫切起来。因为工作中经常接触使用cocoapods,也知道她其实可以搞定这件事，所以就首当其冲的选择了基于cocoapods的封装方案。</p>\n</blockquote>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why\"></a>Why</h2><ul>\n<li>给工作中封装的组件一个沉淀的地方。</li>\n<li>为新项目的开展提供高效的支撑。</li>\n<li>框架代码单独维护，功能点升级更新快捷。</li>\n<li>一定程度督促自己代码的组织与优化。</li>\n</ul>\n<h2 id=\"知识储备\"><a href=\"#知识储备\" class=\"headerlink\" title=\"知识储备\"></a>知识储备</h2><p>搭建的过程大致参考了这篇教程：<a href=\"http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/\" target=\"_blank\" rel=\"external\">使用Cocoapods创建私有podspec</a><br>教程非常的细致，很赞的分享。其中有几个地方可能会有点疑惑：</p>\n<h3 id=\"Podfile中specs引入方式\"><a href=\"#Podfile中specs引入方式\" class=\"headerlink\" title=\"Podfile中specs引入方式\"></a>Podfile中specs引入方式</h3><h4 id=\"1-path-gt-的引入方式\"><a href=\"#1-path-gt-的引入方式\" class=\"headerlink\" title=\"1. :path =&gt;的引入方式\"></a>1. :path =&gt;的引入方式</h4><ul>\n<li>会添加到Development Pods中，并且复制整个私有库的文件组织结构（文件夹嵌套关系都会保留）,这种引入方式非常适合于私有库的开发阶段，因为这种方式引入的其实就是实际私有库的源文件，在demo项目中通过这种方式引入，充分测试私有库的相关功能会非常方便快捷。</li>\n<li>对强迫症患者来说可能会觉得有点不完美的地方，就是当specs中包含subspecs的时候，用这种方式引入时，会出现一些多余的文件层次嵌套。。。感兴趣的患者们可以去试一下。。。</li>\n</ul>\n<h4 id=\"2-常规的引入方式\"><a href=\"#2-常规的引入方式\" class=\"headerlink\" title=\"2. 常规的引入方式\"></a>2. 常规的引入方式</h4><p>常规的引入方式这里就不多说了，它走的是另一个极端，会剔除库中的文件组织结构，而简单的划分了源文件与资源文件，如果包含subspecs，只保留子模块名一级的文件层次，模块内部的文件结构将不复存在，这里暂时没有找到合适的解决办法保留原有组织结构。</p>\n<p><img src=\"http://alithink.com/img/2cocoapods/1.png\" alt=\"1.png\"></p>\n<p>比如上图的结构，发布之后将改变为：</p>\n<p><img src=\"http://alithink.com/img/2cocoapods/2.png\" alt=\"2.png\"></p>\n<h3 id=\"子模块划分思路\"><a href=\"#子模块划分思路\" class=\"headerlink\" title=\"子模块划分思路\"></a>子模块划分思路</h3><p>先说结果，大致是按照这个思路进行划分的：  </p>\n<h4 id=\"1-网络（剔除具体API调用部分）\"><a href=\"#1-网络（剔除具体API调用部分）\" class=\"headerlink\" title=\"1. 网络（剔除具体API调用部分）\"></a>1. 网络（剔除具体API调用部分）</h4><ul>\n<li>添加样例</li>\n<li>包含常用插件（network状态标识等）</li>\n<li>缓存</li>\n</ul>\n<h4 id=\"2-模型映射\"><a href=\"#2-模型映射\" class=\"headerlink\" title=\"2. 模型映射\"></a>2. 模型映射</h4><ul>\n<li>统一API调用规则</li>\n<li>封装公共响应处理逻辑</li>\n<li>对于错误类型的统一处理</li>\n</ul>\n<h4 id=\"3-Hybrid\"><a href=\"#3-Hybrid\" class=\"headerlink\" title=\"3. Hybrid\"></a>3. Hybrid</h4><ul>\n<li>资源的预加载（js, css等）</li>\n<li>native能力开放</li>\n</ul>\n<h4 id=\"4-UI\"><a href=\"#4-UI\" class=\"headerlink\" title=\"4. UI\"></a>4. UI</h4><ul>\n<li>HUD</li>\n<li>Tab</li>\n<li>侧边栏</li>\n<li>Nav常用操作</li>\n<li>下拉上拉</li>\n<li>Autolayout封装</li>\n<li>datasource封装</li>\n<li>常用动画转场</li>\n</ul>\n<h4 id=\"5-安全\"><a href=\"#5-安全\" class=\"headerlink\" title=\"5. 安全\"></a>5. 安全</h4><ul>\n<li>加密解密</li>\n</ul>\n<h4 id=\"6-统计\"><a href=\"#6-统计\" class=\"headerlink\" title=\"6. 统计\"></a>6. 统计</h4><ul>\n<li>swizzling添加打点入口</li>\n<li>日志记录模块封装</li>\n<li>bug收集分析</li>\n</ul>\n<h4 id=\"7-动态性\"><a href=\"#7-动态性\" class=\"headerlink\" title=\"7. 动态性\"></a>7. 动态性</h4><ul>\n<li>热部署方案</li>\n</ul>\n<p>主要基于目前涉及项目主要关注的部分进行了一些拆解，每个模块直接可能存在依赖关系，这块cocoapods也贴心的帮忙搞定了，例如:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s.subspec <span class=\"string\">'APIModule'</span> <span class=\"keyword\">do</span> <span class=\"params\">|ss|</span></span><br><span class=\"line\">    ss.source_files = <span class=\"string\">'Classes/APIModule/**/*.&#123;swift,h,m&#125;'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'Moya'</span>, <span class=\"string\">'~&gt; 6.5.0'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'HanekeSwift'</span>, <span class=\"string\">'~&gt; 0.10.1'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'NetworkActivityIndicator'</span>, <span class=\"string\">'~&gt; 0.1.6'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'MonkeyKit/UtilModule'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'MonkeyKit/ModelMapperModule'</span></span><br><span class=\"line\">    ss.dependency <span class=\"string\">'MonkeyKit/SecurityModule'</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>框架会根据将来的实际使用情况再进行优化调整，逐渐完善起来。  </p>\n<h3 id=\"下一步\"><a href=\"#下一步\" class=\"headerlink\" title=\"下一步\"></a>下一步</h3><p>本轮主要是基于基础功能模块的拆分封装，其实对于APP群常用的业务模块也可以做相同的工作，比如登录验证模块或者逻辑的封装等。通过对于公用业务场景的思考，逐渐提炼出可以产品化的地方，然后塞入公用库，将大大提升相关APP群的开发效率与产品质量。</p>\n"},{"title":"理性的你和猴子还有惊慌怪兽","url":"http://blog.alithink.com/2016/05/24/理性的你和猴子还有惊慌怪兽/","content":"<p>TED上面关于拖延症的两个视频很简短但确实分析的比较合理。  </p>\n<h3 id=\"第一段讲述中主要点出了几个拖延期间的影响角色\"><a href=\"#第一段讲述中主要点出了几个拖延期间的影响角色\" class=\"headerlink\" title=\"第一段讲述中主要点出了几个拖延期间的影响角色\"></a>第一段讲述中主要点出了几个拖延期间的影响角色</h3><ol>\n<li>理性的你：<br>初期愿景的发起者，确立的目标，并制定了简单的规划，促使目标完成的积极分子。</li>\n<li>享乐的猴子：<br>用各种有意思的东西去吸引你，打断任务的执行，它出现的时候往往会感觉日子会过的很舒服，理性的你拿他没有办法，但它胆子小，最怕怪兽。</li>\n<li>惊慌怪兽：<br>猴子的克星，只在有任务截止日期（Deadline）的任务最后一段时间出现，将猴子赶回树上，让理智的你重新掌握小船，奋力在截止日期前搞定这桩事情。</li>\n</ol>\n<p>从这里面可以看出来其实有惊慌怪兽的压制，往往猴子还是不敢太嚣张的，惊慌怪兽的出现时机也往往因人因任务量而异，但往往事情还是能够搞定的。<br>所以问题的关键就在于那些没有Deadline的任务！！！<br>那么问题解决的关键也就很清楚了，规划的时候要确立截止的时间，并最好让它不容易被轻易推翻，比如承诺给他人、公开发布自己的规划等等。 </p>\n<h3 id=\"其实拖延也是有好处的\"><a href=\"#其实拖延也是有好处的\" class=\"headerlink\" title=\"其实拖延也是有好处的\"></a>其实拖延也是有好处的</h3><p>这是第二段讲述中主要阐述的东西<br>核心思想：立马开始并慢慢结束，让拖延的这段时间去发现重新认识目标任务本身，是很多创造者善于做的事情。<br>举了几个例子，比如贝多芬画蒙娜丽莎，画了好多年，中间研究了光学，反而促进了后期作品的创作。<br>还有就是以创业来说的话，其实不一定要做第一人，而要做创新者，因为基于已经有的事物的创新要容易的多，讲述着分享了一个调查，抢做第一人的失败率大概是48%，而创新改进的后起者的失败率则要低至8%。  </p>\n<blockquote>\n<p>博客写作也是拖延了好久了，今天开始一周至少一篇吧，周末就是Deadline ^_^ 共勉</p>\n</blockquote>\n"},{"title":"Swifter Tips阅读随想1","url":"http://blog.alithink.com/2016/05/10/Swifter Tips阅读随想1/","content":"<p><img src=\"/img/1operator/1.png\" alt=\"\"></p>\n<blockquote>\n<p>这样可以很自然的想到<br>aaa ?? (a<em>b</em>c)<br>比<br>var default = a<em>b</em>c<br>aaa ?? default<br>性能上要优越，规避了一次计算，只有在真正需要的时候才会去计算默认值 </p>\n</blockquote>\n<p>在 Swift 中，其实 &amp;&amp; 和 || 这两个操作符里也用到了 @autoclosure。作为练习，不妨打开 Playground，试试看怎么实现这两个操作符<br><img src=\"/img/1operator/2.png\" alt=\"\"><br>按照这个思路，就可以轻松的定制操作符啦<br>比如这个&amp;&amp;的就这么简单<br>swift这个操作符只能接受bool类型<br>那么其实知道怎么实现的了就可以尝试给他扩展<br><img src=\"/img/1operator/3.png\" alt=\"\"><br>默认的是不支持的<br>这样这一块的知识点就通过一轮探索就都搞通了，还能加强记忆</p>\n"},{"title":"《三体》浅读梳理","url":"http://blog.alithink.com/2015/06/06/《三体》浅读梳理/","content":"<blockquote>\n<p>弱小和无知不是生存的障碍，傲慢才是</p>\n</blockquote>\n<hr>\n<h3 id=\"三体中的经典宇宙观点：\"><a href=\"#三体中的经典宇宙观点：\" class=\"headerlink\" title=\"三体中的经典宇宙观点：\"></a>三体中的经典宇宙观点：</h3><ol>\n<li>同纬度的黑暗森林法则</li>\n<li>零光速（光幕 零维）黑洞的形成是因为曲率光速航迹所致</li>\n<li>宇宙的低维化进程 塌缩为奇点 重归高维</li>\n<li>物理法则不是恒定不变的，物理法则是可以当做武器的，常被利用的有光速与维度（二向箔）</li>\n<li>可以向大宇宙索取质量形成小宇宙</li>\n<li>各个宇宙其实是超模上的一个个泡</li>\n</ol>\n<h3 id=\"三体中感兴趣科技：\"><a href=\"#三体中感兴趣科技：\" class=\"headerlink\" title=\"三体中感兴趣科技：\"></a>三体中感兴趣科技：</h3><ol>\n<li>冬眠技术，即使未来可能是毁灭</li>\n<li>高度信息化，随处调取的全息信息窗体</li>\n<li>光速飞船</li>\n<li>与宇宙的无隔绝接触 人造地表大气压层</li>\n<li>宇宙人造生态系统</li>\n<li>智子</li>\n<li>太空电梯</li>\n<li>控制睡眠时间</li>\n<li>高维碎片感受</li>\n</ol>\n<h3 id=\"印象深刻的角色：\"><a href=\"#印象深刻的角色：\" class=\"headerlink\" title=\"印象深刻的角色：\"></a>印象深刻的角色：</h3><ol>\n<li>大史</li>\n<li>逻辑</li>\n<li>云天明</li>\n</ol>\n"},{"title":"IPA 企业证书重新签名","url":"http://blog.alithink.com/2014/07/21/IPA 企业证书重新签名/","content":"<h3 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h3><ul>\n<li>Step1 : 解压IPA</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip MYAPP.ipa</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Step2: 删除旧的代码签名</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf Payload/ MYAPP.app/_CodeSignature</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Step3: 更换证书</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp MyEnterprise.mobileprovision Payload/ MYAPP.app/embedded.mobileprovision</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Step4: 重签名</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/bin/codesign -f -s <span class=\"string\">\"iPhone Distribution: YourCompanyName\"</span> --resource-rules Payload/ MYAPP.app/ResourceRules.plist Payload/ MYAPP.app</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Step 5: 重新打包，生成新的ipa</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zip -r New_ MYAPP.ipa Payload</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>说明：<br>MYAPP.ipa: 要重签名的ipa</p>\n<p>MyEnterprise.mobileprovision:要用来签名的provision文件</p>\n<p>YourCompanyName:指该签名对应的证书的名字，这个可以在钥匙串中找到</p>\n</blockquote>\n<h4 id=\"在step4时有可能会报错：object-file-format-unrecognized-invalid-or-unsuitable-解决方法：\"><a href=\"#在step4时有可能会报错：object-file-format-unrecognized-invalid-or-unsuitable-解决方法：\" class=\"headerlink\" title=\"在step4时有可能会报错：object file format unrecognized, invalid, or unsuitable 解决方法：\"></a>在step4时有可能会报错：object file format unrecognized, invalid, or unsuitable 解决方法：</h4><ul>\n<li>1）首先查看/usr/bin目录下是否存在codesign_allocate程序，如果存在，执行改名操作。 如果不存在，直接执行第二步</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mv /usr/bin/codesign_allocate /usr/bin/codesign_allocate_old</span><br></pre></td></tr></table></figure>\n<ul>\n<li>2）将xcode目录下的codesign_allocate做一个软链接</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate /usr/bin</span><br></pre></td></tr></table></figure>\n"},{"title":"Cocos2D简单iPhone游戏【入门教程】","url":"http://blog.alithink.com/2014/07/17/cocos2d教程/","content":"<p>我想没有什么比更新入门教程更适合用来庆祝具有标志性的Cocos2D 3.0的诞生了。</p>\n<p>Cocos2D 3.0是iOS平台一款2D游戏开发框架的最新版本。App Store上数以千计的游戏不乏一些排行前十的游戏都是用它来进行开发的。</p>\n<p>它对sprite有很好的支持,包含一个完美的Chipmunk2D physics类库，支持OpenAL声音类库，诸多有趣的效果，让你可以用它做更多事情。</p>\n<p>通过本Cocos2D 3.0的入门教程，你将会学习从头到尾的编写一个简单有趣的iPhone 2D游戏。如果你之前已经学习过了Cocos2D 2.0的教程，那么将会将会对本教程感觉比较熟悉，但是你仍然可以通过本教程学习利用物理引擎实现一些好玩的东西。</p>\n<p>你可以选择跟随本教程进行学习，当然你也可以直接在本文的末尾下载例子源程序进行学习。那么接下来我们跟随忍者一起热血一下吧。</p>\n<h3 id=\"Cocos2D-vs-Sprite-Kit\"><a href=\"#Cocos2D-vs-Sprite-Kit\" class=\"headerlink\" title=\"Cocos2D vs Sprite Kit\"></a>Cocos2D vs Sprite Kit</h3><p>在你开始学习之前，你也许在想：“嘿，我已经有苹果的Sprite Kit了，还需要Cocos2D吗？我真的需要尝试一些其它的东东吗？”</p>\n<p>好吧，跟其它任何游戏框架一样，Cocos2D也有它的一些优点和缺点：</p>\n<h4 id=\"Cocos2D-优点\"><a href=\"#Cocos2D-优点\" class=\"headerlink\" title=\"Cocos2D 优点\"></a>Cocos2D 优点</h4><ul>\n<li><p>优点一: 你不再被限制在iOS平台了，想要把你的游戏发布到Android平台上吗？那么用Cocos2D可以帮你写一遍代码就可以跨平台发布了！</p>\n</li>\n<li><p>优点二: 你可以写代码自定义一些OpenGL效果了。</p>\n</li>\n<li>优点三: 它是开源的，也就是说如果你想要改造写什么或者研究一下它内部是如何运转的，你只需要深入研究一下它的源码就可以了。.</li>\n</ul>\n<h4 id=\"Cocos2D-缺点\"><a href=\"#Cocos2D-缺点\" class=\"headerlink\" title=\"Cocos2D 缺点\"></a>Cocos2D 缺点</h4><ul>\n<li><p>缺点一: 它不是内建在Xcode里面的，所以你要使用它就必须要下载安装它。</p>\n</li>\n<li><p>缺点二: 它目前还没有自带的纹理与粒子编辑器（但是已经有很多很棒的第三方编辑器了）。</p>\n</li>\n</ul>\n<p>Cocos2D拥有一个完整的社区，社区里有很多相关的教程、书籍和例子程序。Cocos2D的缔造者是一波旨在令游戏开发变得简单的游戏开发者，他们希望开发者利用它能够简单地创造很多伟大的游戏。</p>\n<h3 id=\"安装-Cocos2D\"><a href=\"#安装-Cocos2D\" class=\"headerlink\" title=\"安装 Cocos2D\"></a>安装 Cocos2D</h3><p>The new Cocos2D 3.0 Installer</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game1.png\" alt=\"\"></p>\n<p>Cocos2D 3.0 使用了一个全新的安装程序，安装起来没有比这更简单的了！</p>\n<p>只需要 下载最新的Cocos2D 安装器 (3.0版本以上), 打开DMG文件然后双击安装器。随后安装器会自动帮你配置好Xcode的Cocos2D模板并且部署好Cocos2D的Xcode文档。</p>\n<p>当安装开始的时候，你将会看到一大堆信息，待安装完成之后会自动打开Cocos2D的欢迎页面。恭喜你，你已经做好了使用Cocos2D的准备工作了！</p>\n<h3 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h3><p>让我们使用上一步安装的Cocos2D模板搭建一个简单的Hello World游戏作为开始吧。</p>\n<p>打开Xcode，选择File\\New Project, 然后选择iOS\\cocos2d v3.x\\cocos2d iOS 模板，点击Next:</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game2.png\" alt=\"\"></p>\n<p>Product Name 输入Cocos2DSimpleGame, 设备选择iPhone 然后点击Next:</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game3.png\" alt=\"\"></p>\n<p>选择一个位置保存你的工程，然后点击Create。然后直接点击play按钮编译运行一下项目。你会看到下面的东东:</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game4.png\" alt=\"\"></p>\n<p>点击 Simple Sprite 按钮切换到另一个测试场景,接下来我们将一起针对改场景进行改造:</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game5.png\" alt=\"\"></p>\n<p>Cocos2D引入了场景scenes的概念，你可以把它想成是游戏的多个屏幕。HelloWorld游戏的第一个场景就是它的菜单场景IntroScene, 第二个场景就是转动着Cocos2D logo标志的HelloWorldScene. 让我们仔细研究下这个场景。</p>\n<h3 id=\"忍者驾到\"><a href=\"#忍者驾到\" class=\"headerlink\" title=\"忍者驾到!\"></a>忍者驾到!</h3><p>在忍者做它漂亮的出场秀之前，你首先需要用到一些图片素材…</p>\n<ul>\n<li><p>第一步：First step, 下载本工程的资源包。解压后拖动ResourcePack到项目的工程目录中。一定要勾选上 “Copy items into destination group’s folder (if needed)”选项并且勾选上Cocos2DSimpleGame目标target。</p>\n</li>\n<li><p>第二步：打开HelloWorldScene.m。记住，这段代码是用来构建那个旋转着Cocos2D logo的场景的，这个场景可以作为游戏制作很好的起点。修改之前先看一下模板代码：</p>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@implementation HelloWorldScene &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 1  </span></span><br><span class=\"line\">    CCSprite *_sprite;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (id)init &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 2  </span></span><br><span class=\"line\">    self = [super init];  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!self) return(nil); </span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"comment\">// 3  </span></span><br><span class=\"line\">    self.userInteractionEnabled = YES;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 4  </span></span><br><span class=\"line\">    CCNodeColor *background = [CCNodeColor nodeWithColor:[CCColor colorWithRed:<span class=\"number\">0.2f</span> green:<span class=\"number\">0.2f</span> blue:<span class=\"number\">0.2f</span> alpha:<span class=\"number\">1.0f</span>]];  </span><br><span class=\"line\">    [self addChild:background];  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 5  </span></span><br><span class=\"line\">    _sprite = [CCSprite spriteWithImageNamed:@<span class=\"string\">\"Icon-72.png\"</span>];  </span><br><span class=\"line\">    _sprite.position  = ccp(self.contentSize.width/<span class=\"number\">2</span>,self.contentSize.height/<span class=\"number\">2</span>);  </span><br><span class=\"line\">    [self addChild:_sprite];  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 6  </span></span><br><span class=\"line\">    CCActionRotateBy* actionSpin = [CCActionRotateBy actionWithDuration:<span class=\"number\">1.5f</span> angle:<span class=\"number\">360</span>];  </span><br><span class=\"line\">    [_sprite runAction:[CCActionRepeatForever actionWithAction:actionSpin]];  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 7  </span></span><br><span class=\"line\">    CCButton *backButton = [CCButton buttonWithTitle:@<span class=\"string\">\"[ Menu ]\"</span> fontName:@<span class=\"string\">\"Verdana-Bold\"</span> fontSize:<span class=\"number\">18.0f</span>];  </span><br><span class=\"line\">    backButton.positionType = CCPositionTypeNormalized;  </span><br><span class=\"line\">    backButton.position = ccp(<span class=\"number\">0.85f</span>, <span class=\"number\">0.95f</span>); <span class=\"comment\">// Top Right of screen  </span></span><br><span class=\"line\">    [backButton setTarget:self selector:@selector(onBackClicked:)];  </span><br><span class=\"line\">    [self addChild:backButton];  </span><br><span class=\"line\">    return self;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>让我们一起逐行过一下：</p>\n<p>为了接下来更方便地操作这个正在旋转的Cocos2D logo图标，我们为它声明一个私有实例。</p>\n<p>初始化 HelloWorld 场景.</p>\n<p>配置这个场景让它可以响应Cocos2D 的点击事件。在之后你会看到这这样配置使得 touchBegan:withEvent: 方法将要被调用到。</p>\n<p>创建一个 CCNodeColor, 用它来展示一种颜色（本教程中用它展示深灰色）。当这个node创建之后，你需要调用 addChild: 把它加到当前场景之后才能看到它。现在你的场景拥有一个背景色了!</p>\n<p>用 spriteWithImageNamed: 这个方法创建一个 CCSprite 并为它加载一个图片资源。通过使用这个屏幕的坐标，这个sprite的位置被放置在了屏幕的中央。再调用一下 addChild: 方法，把它也添加到场景中。</p>\n<p>创建一个 CCActionRotateBy action，我们将用它来给这个sprite做360度旋转，配置 CCActionRepeatForever 参数让这个旋转动作无限循环下去。然后调用 runAction 方法让sprite接收这个action。在接下来的讨论中会发现Actions 是Cocos2D的一项非常强大的特性。</p>\n<p>创建一个 CCButton 用以点击返回 IntroScene 场景, 你可以用这个操作作为重新初始化当前场景的一种简单方法。</p>\n<p>很棒! 首先呢，让我们把旋转着的Cocos2D logo图标替换成忍者的。</p>\n<p>想想该怎么做呢? 给你一些提示:</p>\n<p>看一看你刚刚添加到项目中的 ResourcePack ,从里面找一找忍者的图片。</p>\n<p>你只需要改动一行代码就可以了!</p>\n<p>尝试尽量自己搞定它，但是如果你实在卡在这里了，那么方法就在下面：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 5  </span></span><br><span class=\"line\">_sprite = [CCSprite spriteWithImageNamed:@<span class=\"string\">\"player.png\"</span>];</span><br></pre></td></tr></table></figure>\n<p>这很简单， _sprite 是一个很明显的名字但是当你开始使用_sprite1, _sprite2 的时候它会显得有一点混乱，所以我们把 _sprite 改成 _player。在 @implementation 中找到第一项：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@implementation HelloWorldScene &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 1  </span></span><br><span class=\"line\">    CCSprite *_sprite;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后把它改成:<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@implementation HelloWorldScene &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 1  </span></span><br><span class=\"line\">    CCSprite *_player;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>很快你就会发现Xcode给你标志出5个错误并且帮你把这错误的几行用红色高亮了。不用担心，这是因为你把 _sprite 改名成了 _player，导致 _sprite 失效的原因。所以继续把所有的 _sprite 引用都改成 _player. 就OK了。</p>\n<p>编译运行项目，让我们看一下不需要打怪的忍者的生活状态。</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game6.png\" alt=\"\"></p>\n<p>现在旋转着的Cocos2D logo图片已经被替换成忍者的了。但愿忍者不会感觉到晕。。。</p>\n<p>然而，忍者这辈子就是被训练来战斗的，所以接下来你想要搞一些怪物让忍者挑战一下!</p>\n<h3 id=\"疯狂的怪物出现了\"><a href=\"#疯狂的怪物出现了\" class=\"headerlink\" title=\"疯狂的怪物出现了\"></a>疯狂的怪物出现了</h3><p>接下来你想要添加一些怪物到你的场景中。一个不会动的怪物自然不会对一个训练有素的忍者造成任何威胁,所以为了变得更有趣一些，你将添加一些会动的怪物。你将在屏幕的右外延创建一些怪物并且给它们添加 CCAction , 命令它们从屏幕右边向屏幕左边移动。</p>\n<p>在 HelloWorldScene.m 中添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)addMonster:(CCTime)dt &#123;  </span><br><span class=\"line\">    CCSprite *monster = [CCSprite spriteWithImageNamed:@<span class=\"string\">\"monster.png\"</span>];  </span><br><span class=\"line\">    <span class=\"comment\">// 1  </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> minY = monster.contentSize.height / <span class=\"number\">2</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> maxY = self.contentSize.height - monster.contentSize.height / <span class=\"number\">2</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> rangeY = maxY - minY;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> randomY = (arc4random() % rangeY) + minY;  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 2  </span></span><br><span class=\"line\">    monster.position = CGPointMake(self.contentSize.width + monster.contentSize.width/<span class=\"number\">2</span>, randomY);  </span><br><span class=\"line\">    [self addChild:monster];  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 3  </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> minDuration = <span class=\"number\">2.0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> maxDuration = <span class=\"number\">4.0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> rangeDuration = maxDuration - minDuration;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> randomDuration = (arc4random() % rangeDuration) + minDuration;  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 4  </span></span><br><span class=\"line\">    CCAction *actionMove = [CCActionMoveTo actionWithDuration:randomDuration position:CGPointMake(-monster.contentSize.width/<span class=\"number\">2</span>, randomY)];  </span><br><span class=\"line\">    CCAction *actionRemove = [CCActionRemove action];  </span><br><span class=\"line\">    [monster runAction:[CCActionSequence actionWithArray:@[actionMove,actionRemove]]];  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>让我们一起逐行过一下：</p>\n<p>为怪物的诞生位置定一个纵向范围。当你放置一个sprite的时候，默认的定位到的是sprite的中心坐标。所以这里为了不至于让怪物断掉，你在计算的时候需要用屏幕的高度减掉怪物的高度。</p>\n<p>用屏幕的宽度加上怪物的宽度确保把怪物恰好定位到屏幕的右外延，不让怪物露出来。</p>\n<p>现在你想要决定怪物横穿屏幕的用时，让我们定个随机时间吧，让怪物的移动更加难以预测。</p>\n<p>你将使用Cocos2D的 CCActionMoveTo: action 来快速移动怪物从起点（屏幕右外延）到目的地（屏幕左外延）。</p>\n<p>你已经看到旋转的action了，然而Cocos2D其实提供了很多非常方便的内置actions，包括移动的、旋转的、消失的、动画的等等。这里我们对怪物使用三种action:</p>\n<ul>\n<li><p>CCActionMoveTo: 这个action被用作控制怪物的移动轨迹，在本教程中用于控制它从屏幕右侧移动到左侧。这个action的duration用于控制怪物执行动作所需的时间。Duration设置的越短，怪物移动的速度将越快。在这里你把duration设置成2秒到4秒之间的随机秒数。</p>\n</li>\n<li><p>CCActionRemove: 将node从它的parent移除的好方法，可以有效地将node从场景中删除。当看不到怪物的时候（怪物移动到屏幕做外延的时候）你可以使用这个action把怪物从这个场景中移除。这步是非常重要的，如果不这么做你会发现有成千上万的怪物试图穿越你的iPhone，它们会耗光你设备的全部资源。</p>\n</li>\n<li><p>CCActionSequence: 这个序列action可以让你把一组action串在一起按序列执行，同一时间只有一个action在执行。通过这个方法你可以设置 CCActionMoveTo action 首先执行，一旦这个action执行完成了接着执行 CCActionRemove action。你可以用这个强大的action创建一组复杂的动画序列。<br>好的，现在你有了一个向场景添加怪物的方法了。然而对于一个经验丰富的忍者来说，一个怪物不足为惧，让我们写一个定时产生怪物的方法吧。</p>\n</li>\n</ul>\n<p>Cocos2D 提供了一个定时器帮助你每X.X秒调用一下回调方法，所以你可以利用它来完成每X秒生成怪物的方法。</p>\n<p>打开 HelloWorldScene.m 然后在 onEnter 方法的 [super onEnter]; 之后添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[self schedule:@selector(addMonster:) interval:<span class=\"number\">1.5</span>];</span><br></pre></td></tr></table></figure>\n<p>这样会创建一个每1.5秒调用 addMonster: 方法的Cocos2D 定时器。</p>\n<p>记住当你创建 addMonster 方法的时候, 会有一个额外的 dt 参数。 这代表着时间增量，也表示当前帧与之前的时间差异。定时器要求每个方法声明的时候都加上这个参数，虽然在这个教程里面你将不会使用到它。</p>\n<p>在你看到这些怪物之前，你需要做点修改。让我们带领大家从阴暗中走出来一些。为啥不把背景色从深灰改成浅灰色呢？</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2  </span></span><br><span class=\"line\">CCNodeColor *background = [CCNodeColor nodeWithColor:[CCColor colorWithRed:<span class=\"number\">0.6f</span> green:<span class=\"number\">0.6f</span> blue:<span class=\"number\">0.6f</span> alpha:<span class=\"number\">1.0f</span>]];</span><br></pre></td></tr></table></figure>\n<p>目前你忍者的头一定还在旋转着，你能让它停止转动，并且把他移动到偏左一些这样便于让它做好准备面对前面的突击？</p>\n<p>禁用头的旋转 CCActionRotateBy action。<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 6  </span></span><br><span class=\"line\"><span class=\"comment\">//CCActionRotateBy* actionSpin = [CCActionRotateBy actionWithDuration:1.5f angle:360];  </span></span><br><span class=\"line\"><span class=\"comment\">//[_player runAction:[CCActionRepeatForever actionWithAction:actionSpin]];</span></span><br></pre></td></tr></table></figure></p>\n<p>改变忍者的位置。<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_player.position  = ccp(self.contentSize.width/<span class=\"number\">8</span>,self.contentSize.height/<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure></p>\n<p>你也许会疑惑为什么要把宽度除以8（屏幕的1/8）。这是因为如果图方便直接写死坐标，那么遇到不同分辨率设备的时候就需要每种设备设置不同的坐标。</p>\n<p>如果你感兴趣想要多了解一些，看一下 CCButton 的位置配置方式，注意它使用了一种不同的 positionType ，它使用了标准化的解决方案0..1，0..1针对所有设备。</p>\n<p>编译运行，你应该可以看到很多怪物穿越屏幕！</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game7.png\" alt=\"\"></p>\n<h3 id=\"波动拳（Hadouken）\"><a href=\"#波动拳（Hadouken）\" class=\"headerlink\" title=\"波动拳（Hadouken）\"></a>波动拳（Hadouken）</h3><p>不幸的是你的忍者还没有足够强大到可以发射波动拳，所以你将需要依靠你专业的投掷技巧来抵御邪恶的（或者可能只是误解）怪物。</p>\n<p>给自己那个手里剑然后添加个投掷的action</p>\n<p>你将再次使用 CCActionMoveTo: action, 然而这次不会像是从 _player.position 移动到点击位置那般简单。 你想要将你的投射物沿着点击的方向穿越整个屏幕。因此你需要用到只是一点数学知识。</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game8.png\" alt=\"\"></p>\n<p>你可以从起点到点击点的x轴、y轴的位移变化中得到一个小的三角形。你只需求得一个拥有相同角度并且终止点在屏幕边沿的大三角形就OK了。</p>\n<p>为了完成这个运算，如果你有一些向量数学的基础就轻松多了（比如知道增加和减少向量的方法）。 Cocos2D 包含了一系列方便的向量操作函数，如 ccpAdd 和 ccpSub 。</p>\n<p>如果你对接下来的计算有任何疑问，请速查 vector math explanation。关于这个方面我个人建议看一下非常好的 Khan Academy 教学视频。</p>\n<p>响应点击了!</p>\n<p>正如你所看到的HelloWorldScene 模板已经在 init 方法中允许接收touch相应了。<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 3  </span></span><br><span class=\"line\">self.userInteractionEnabled = YES;</span><br></pre></td></tr></table></figure></p>\n<p>为了处理点击相应你通常需要创建 touchBegan: 方法，不过默认模板已经很体贴地给你带来了一个简单的 touchBegan 方法实例。</p>\n<p>打开 HelloWorldScene.m 并且用下面的代码替换现有的 touchBegan: 方法内容:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)touchBegan:(UITouch *)touch withEvent:(UIEvent *)event &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 1  </span></span><br><span class=\"line\">    CGPoint touchLocation = [touch locationInNode:self];  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 2  </span></span><br><span class=\"line\">    CGPoint offset    = ccpSub(touchLocation, _player.position);  </span><br><span class=\"line\">    <span class=\"keyword\">float</span>   ratio     = offset.y/offset.x;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span>     targetX   = _player.contentSize.width/<span class=\"number\">2</span> + self.contentSize.width;  </span><br><span class=\"line\">    <span class=\"keyword\">int</span>     targetY   = (targetX*ratio) + _player.position.y;  </span><br><span class=\"line\">    CGPoint targetPosition = ccp(targetX,targetY);  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 3  </span></span><br><span class=\"line\">    CCSprite *projectile = [CCSprite spriteWithImageNamed:@<span class=\"string\">\"projectile.png\"</span>];  </span><br><span class=\"line\">    projectile.position = _player.position;  </span><br><span class=\"line\">    [self addChild:projectile ];  </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// 4  </span></span><br><span class=\"line\">    CCActionMoveTo *actionMove   = [CCActionMoveTo actionWithDuration:<span class=\"number\">1.5f</span> position:targetPosition];  </span><br><span class=\"line\">    CCActionRemove *actionRemove = [CCActionRemove action];  </span><br><span class=\"line\">    [projectile runAction:[CCActionSequence actionWithArray:@[actionMove,actionRemove]]];  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>让我们一起逐行过一下：</p>\n<p>你需要将屏幕点击转化为场景的坐标系表示。Cocos2D的UITouch分类里有一个很方便的方法 locationInNode: 可以做的这一点。</p>\n<p>所以正如你所见，你得到了一个由起点到点击点的x、y轴位移组成的小三角形。你只需求得一个拥有相同角度并且终止点在屏幕边沿的大三角形就OK了。</p>\n<p>创建投掷物的sprite并且设置它的起始位置与忍者一样。你可以简单的使用 _player ，这就是你之前设置这个私有实例变量的原因。</p>\n<p>你现在应该对CCActionMoveTo 这个方法更加熟悉了。你有了之前计算的目标点和投掷物投掷完成的时间duration（duration越小，投掷物就会越快投过去）。</p>\n<p>编译运行，尽情开火吧!</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game9.png\" alt=\"\"></p>\n<p>Arggghhh 这些怪物太强大了，我们为什么不把他们给干掉呢！</p>\n<h3 id=\"碰撞检测和物理\"><a href=\"#碰撞检测和物理\" class=\"headerlink\" title=\"碰撞检测和物理\"></a>碰撞检测和物理</h3><p>那么现在你有了一个忍者、很多怪物和很多穿越屏幕的手里剑。看起来不错了，不过如果带一点摩擦的话就更好玩了，为了达成这一目的你需要在投掷物跟怪物之间做碰撞检测。</p>\n<p>Cocos2D 3.0的一个伟大的特性就是一套完整的物理引擎，有了它完成这个任务就小菜一碟了。物理引擎的伟大在于模拟了真实的移动，而且它对于处理碰撞检测也非常有用。 </p>\n<p>你现在将要使用Cocos2D的物理引擎去判定怪物和抛掷物的碰撞。完成它需要四个步骤：</p>\n<ul>\n<li><p>搭建物理世界. 物理世界是针对物理学计算的模拟空间。你将为当前场景搭建一个并且修改一些属性例如重力。物理世界搭建完成之后，你需要修改现有的游戏对象，把他们添加到物理世界中进而他们都将成为物理模拟的一部分。</p>\n</li>\n<li><p>为每个sprite创建物理主体. 使用Cocos2D你可以为每一个sprite关联物理主体用于碰撞检测并且可以设置某些属性。记住物理主体不用必须跟sprite的形状完全一样。通常它是一些简单的矩形或者圆形，甚至是一个像素清晰的轮廓。这样已经可以很好的满足大部分游戏并且可以提供更好的物理效果处理效率。<br>为每一种sprite设置CollisionType. Cocos2D物理引擎的一个方便特性是你不需要用数字定义你的碰撞类型了。你可以配置一个简单易懂的字符串定义你的碰撞类型。</p>\n</li>\n<li><p>配置碰撞相应代理. 默认当连个物理主体碰在一起他们会被物理模拟器处理，然而你想要在投掷物碰到怪物的时候做一些事情例如干掉怪物。因此你需要添加一个碰撞响应代理去处理投掷物与怪物之间的碰撞类型。</p>\n</li>\n</ul>\n<p>让我们开始吧。首先，你现在需要为你的物理世界添加另外一个私有实例变量。</p>\n<p>打开 HelloWorldScene.m 然后在 @implementation HelloWorldScene 声明里面 CCSprite 的初始化之后添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CCPhysicsNode *_physicsWorld;</span><br></pre></td></tr></table></figure>\n<p>现在你需要配置并添加这个物理模拟器到你的场景中，在 init 方法的 CCNodeColor 之后添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_physicsWorld = [CCPhysicsNode node];  </span><br><span class=\"line\">_physicsWorld.gravity = ccp(<span class=\"number\">0</span>,<span class=\"number\">0</span>);  </span><br><span class=\"line\">_physicsWorld.debugDraw = YES;  </span><br><span class=\"line\">_physicsWorld.collisionDelegate = self;  </span><br><span class=\"line\">[self addChild:_physicsWorld];</span><br></pre></td></tr></table></figure>\n<p>因为你要使用物理模拟器主要为了做碰撞检测，在这里把重力（Gravity）设置成 (0,0) 。Cocos2D 有很多方便的调试函数，debugDraw 标志对于具体数字化物理世界是非常有用的。你可以看到所有被添加到模拟器上的物理主体。你同时需要设置 collisionDelegate 到 self, 这样使得你可以添加碰撞处理到场景中而且物理模拟器知道去 HelloWorldScene 中匹配碰撞的响应处理。</p>\n<p>你会注意到Xcode在 collisionDelegate 这行抛出了一个警告; 这很容易解决。打开 HelloWorldScene.h 然后标志这个 interface 实现CCPhysicsCollisionDelegate。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@interface HelloWorldScene : CCScene &lt;CCPhysicsCollisionDelegate&gt;</span><br></pre></td></tr></table></figure>\n<p>现在你需要为忍者配置物理主体并且将它添加到 _physicsWorld 而不是直接添加到场景中。</p>\n<p>退回到 HelloWorldScene.m, 在 init 方法中找到如下代码:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[self addChild:_player];</span><br></pre></td></tr></table></figure>\n<p>将它替换成如下代码:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_player.physicsBody = [CCPhysicsBody bodyWithRect:(CGRect)&#123;CGPointZero, \t_player.contentSize&#125; cornerRadius:<span class=\"number\">0</span>]; <span class=\"comment\">// 1  </span></span><br><span class=\"line\">_player.physicsBody.collisionGroup = @<span class=\"string\">\"playerGroup\"</span>; <span class=\"comment\">// 2  </span></span><br><span class=\"line\">[_physicsWorld addChild:_player];</span><br></pre></td></tr></table></figure>\n<p>快速看一下这个代码片段:</p>\n<p>创建一个物理主体，在这个例子中使用忍者的 contentSize 来创建一个环绕在忍者四周的矩形主体。<br>设置物理主体的 collisionGroup, 默认所有的主体都会碰撞。如果你将一些物理主体设置成相同的 collisionGroup 他们之间就不会再互相碰撞了, 这点当你想要创建一个由多个身体组成的角色，而且不想让他的每个身体互相碰撞的时候非常有用,例如一个拿着武器的角色。你将用这个保证投掷物不会撞到角色。</p>\n<p>你已经配置好物理模拟器、为角色创建了物理主体并且把它添加到了物理模拟器中。现在想想你能不能自己为怪物也添加到物理模拟器中。</p>\n<p>查找 addMonster: 方法并且定位到如下代码:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[self addChild:monster];</span><br></pre></td></tr></table></figure>\n<p>将它替换成:<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">monster.physicsBody = [CCPhysicsBody bodyWithRect:(CGRect)&#123;CGPointZero, \tmonster.contentSize&#125; cornerRadius:<span class=\"number\">0</span>];  </span><br><span class=\"line\">monster.physicsBody.collisionGroup = @<span class=\"string\">\"monsterGroup\"</span>;  </span><br><span class=\"line\">monster.physicsBody.collisionType  = @<span class=\"string\">\"monsterCollision\"</span>;  </span><br><span class=\"line\">[_physicsWorld addChild:monster];</span><br></pre></td></tr></table></figure></p>\n<p>这几乎是跟为 _player 添加物理主体的方式的一致的，但是我为了介绍一个新属性使了点小聪明。这次你设置了 collisionType 属性, 这将被用来为’monsterCollision’和’projectileCollsion’的 collisionType 搭建一个物理模拟器碰撞代理方法。</p>\n<p>你快搞定它了！这次试着把抛掷物添加到模拟器中。</p>\n<p>我会给你一个提示：搞定它需要使用到 collisionType 和 collisionGroup 属性。</p>\n<p>找到 touchBegan:withEvent 方法然后定位到如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[self addChild:projectile];</span><br></pre></td></tr></table></figure>\n<p>将它替换成:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">projectile.physicsBody = [CCPhysicsBody bodyWithRect:(CGRect)&#123;CGPointZero, \tprojectile.contentSize&#125; cornerRadius:<span class=\"number\">0</span>];  </span><br><span class=\"line\">projectile.physicsBody.collisionGroup = @<span class=\"string\">\"playerGroup\"</span>;  </span><br><span class=\"line\">projectile.physicsBody.collisionType  = @<span class=\"string\">\"projectileCollision\"</span>;  </span><br><span class=\"line\">[_physicsWorld addChild:projectile];</span><br></pre></td></tr></table></figure>\n<p>编译运行，你应该会看到很多漂亮的粉红色的小方块。</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game10.png\" alt=\"\"></p>\n<p>这些sprite周围的粉红色方块是被 _physics 的 debugDraw 属性创建的。在你首次搭建物理世界的时候他们是很有用的，你可以通过他们确认一切工作是否如你所愿的进行着。注意到在手里剑周围的方块不是很和谐；如果用圆形的话应该更合适一些。</p>\n<p>当然有这么个方法bodyWithCircleOfRadius:可以用于创建更时候你的抛掷物的圆形物理主体。将抛掷物物理主体的配置代码替换为如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">projectile.physicsBody = [CCPhysicsBody bodyWithCircleOfRadius:projectile.contentSize.width/<span class=\"number\">2.0f</span> \tandCenter:projectile.anchorPointInPoints];</span><br></pre></td></tr></table></figure>\n<p>默认中心点会被设置在sprite的左下方，然而你想把圆形放置在你的sprite的中心处。</p>\n<p>好的，你现在已经把你的游戏对象改成物理模拟器的一部分了。现在你一定想要在 projectileCollision 和monsterCollison collisionType 交流的时候做一些事情。</p>\n<p>Cocos2D物理引擎有很多很好的方法去完成这个目的。只需要在 HelloWorldScene.m中添加如下方法：<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (BOOL)ccPhysicsCollisionBegin:(CCPhysicsCollisionPair *)pair monsterCollision:(CCNode *)monster projectileCollision:(CCNode *)projectile &#123;  </span><br><span class=\"line\">    [monster removeFromParent];  </span><br><span class=\"line\">    [projectile removeFromParent];  </span><br><span class=\"line\">    return YES;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这段代码很强大。当物理模拟器被搭建完成之后，物理引擎会去查找CCPhysicsCollisionDelegate 方法，如果找到了就会触发它。参数名设置成你想要配置成的collisionType。</p>\n<p>用这个方法你把 ‘projectile’ 和 ‘monster’彻底从模拟器和场景中移除了。你当然可以添加一个计分器，添加一个特殊效果或者其它你想在抛掷物与怪物碰撞时发生的事情。</p>\n<p>编译运行，你最后应该可以毁灭这些怪物了。忍者，前进，开火！</p>\n<h3 id=\"收尾\"><a href=\"#收尾\" class=\"headerlink\" title=\"收尾\"></a>收尾</h3><p>你现在已经离完成一个简单游戏非常近了。但是 (Pew-Pew!), 添加一些音乐对于现在来说再好不过了。</p>\n<p>Cocos2D 用OpenAL声音类库提供声音支持。不需要添加任何的额外头文件，都为你准备好了。</p>\n<p>历史课程: 对于那些使用Cocos2D之前版本的用户也许会疑惑SimpleAudioEngine怎么了, 这个声音类库已经被Open AL取代了。</p>\n<p>播放一个SFX非常简单, 是时候在忍者每次发镖的时候添加一个SFX了。这个声音可能不能100%完美表现出忍者投掷手里剑的声音。:-)</p>\n<p>在创建抛掷物的 touchBegan: 方法的最后添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[[OALSimpleAudio sharedInstance] playEffect:@<span class=\"string\">\"pew-pew-lei.caf\"</span>];</span><br></pre></td></tr></table></figure>\n<p>是时候添加一些热血的音乐了，在 init 方法的 userInteractionEnabled 之后添加如下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[[OALSimpleAudio sharedInstance] playBg:@<span class=\"string\">\"background-music-aac.caf\"</span> loop:YES];</span><br></pre></td></tr></table></figure>\n<p>最后一步，注释掉 init 方法中的调试语句：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_physicsWorld.debugDraw = YES;</span><br></pre></td></tr></table></figure>\n<p>编译运行, pew-pew. 你现在有声音了，简单不？</p>\n<p><img src=\"http://7xir36.com1.z0.glb.clouddn.com/cocos2d-game11.png\" alt=\"\"></p>\n<h3 id=\"搞完了去哪\"><a href=\"#搞完了去哪\" class=\"headerlink\" title=\"搞完了去哪?\"></a>搞完了去哪?</h3><p>完工了!  Cocos2D 3.0 game 这里有你目前编写的完整的代码。</p>\n<p>你已经在学习 Cocos2D 3.0 的道路上走了一大段路了,向你介绍了一些Cocos2D的核心内容。伟大始于渺小，所以你为什么不通过找个项目再做一些更加深入的研究呢？</p>\n<p>看一下 IntroScene 的代码你将会学到如何创建一个label。为何不加一个记录干掉怪物数量的计数器呢？</p>\n<p>当忍者碰到怪物的时候会发生什么呢？</p>\n<p>想要尝试一些更高大上的动画的话，在Xcode里面打开 Help\\Documentation and API References 然后搜索 CCAction ，你会看到所有的你可以添加到你的游戏角色对象上的动画列表。</p>\n<p>我从来没有见过不会转的手里剑，为啥不尝试给它加一点旋转（我确定在这个教程开始的时候我们看到过一个现成的例子）提示：你可以对一个node多次使用 runAction 。 这些action没必要放在一个序列中。</p>\n<p>如果你想要学到更多关于Cocos2D的知识，official Cocos2D forum 是一个询问问题和学习经验的好地方。我的用户名是 @cocojoe ，随时都可以过来跟我交流。</p>\n<p>如果你对这篇教程有任何疑问或者建议请一起讨论！</p>\n<p><a href=\"http://www.raywenderlich.com/61391/how-to-make-a-simple-iphone-game-with-cocos2d-3-0-tutorial\" target=\"_blank\" rel=\"external\">英文原文链接</a></p>\n"},{"title":"NSNull 找不到指定方法解决方案","url":"http://blog.alithink.com/2014/07/14/NSNull扩展/","content":"<h3 id=\"近期遇到一个问题：\"><a href=\"#近期遇到一个问题：\" class=\"headerlink\" title=\"近期遇到一个问题：\"></a>近期遇到一个问题：</h3><blockquote>\n<p>由于后台人员对于接口数据没有做空值处理，导致客户端接收到的有些数据为空（NSNull），而针对此类数据恰好客户端的存储结构为int和float类型，类型转换时报出了[NSNull intValue]或者[NSNull floatValue] unrecognized selector sent to instance 的错误。</p>\n</blockquote>\n<h3 id=\"解决此问题尝试了以下思路：\"><a href=\"#解决此问题尝试了以下思路：\" class=\"headerlink\" title=\"解决此问题尝试了以下思路：\"></a>解决此问题尝试了以下思路：</h3><blockquote>\n<p>1 添加returnObject == [NSNull null] 判断，NSNull的元素配置一个目标类型的初始值。<br>问题解决了，但这样做的话对于应用需要修改的地方较多，想想比较烦。</p>\n<p>2 想到此问题的引起原因是NSNull缺失这两种方法，也就是说只要为NSNull扩展补充缺失的方法就不会有问题了。</p>\n</blockquote>\n<h3 id=\"扩展NSNull代码如下：\"><a href=\"#扩展NSNull代码如下：\" class=\"headerlink\" title=\"扩展NSNull代码如下：\"></a>扩展NSNull代码如下：</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#import <span class=\"string\">\"NSNull+NullCast.h\"</span> </span></span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"keyword\">float</span>)floatValue &#123;</span><br><span class=\"line\">\treturn <span class=\"number\">0.0</span>;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"keyword\">int</span>)intValue &#123;</span><br><span class=\"line\">\treturn <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在可能出现类似问题的类中引入NSNull+NullCast这个类问题就解决了，无需修改逻辑代码。</p>\n"},{"title":"“简密”App Store处女作","url":"http://blog.alithink.com/2014/05/22/简密/","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>今天是我的iOS App Store上架应用处女作“简密”第一天上线的日子，简密是我从事iOS开发三年以来的第一款个人上架应用，之前做过两年的企业级应用开发以及公司的电商应用开发，有不少应用上架的经验，但要是论完全从头到尾，设计、制图、开发、测试、文案、广告以及部署上架完全由自己一人完成，“简密”确实是我的处女作。不论上架之后销售效果如何，这次开发的过程帮我重新梳理了一遍iOS App Store应用开发上架的整个流程，这点是我觉得做这件事意义最大的地方，当然如果有那么点微薄收入的话，我会更加欣慰的^_^。</p>\n<h3 id=\"回顾一下App创作的过程，有这么几块感觉需要梳理总结：\"><a href=\"#回顾一下App创作的过程，有这么几块感觉需要梳理总结：\" class=\"headerlink\" title=\"回顾一下App创作的过程，有这么几块感觉需要梳理总结：\"></a>回顾一下App创作的过程，有这么几块感觉需要梳理总结：</h3><h3 id=\"App原始矛盾的发掘\"><a href=\"#App原始矛盾的发掘\" class=\"headerlink\" title=\"App原始矛盾的发掘\"></a>App原始矛盾的发掘</h3><p>说白了就是应用要解决什么问题，能用来做些什么。这点很重要，“简密”这点做的不是特别好，因为当时做这款应用其实多半是想把平时工作学习中用到见到过的个人感觉比较好的体验效果做一个集合展示，由于最近做过二维码与加密解密模块的研究开发，所以就草率的选定了带加密功能的二维码这个核心需求。但现在回想过来这样做其实是有点本末倒置了，还是应该从用户的角度出发，从问题出发，然后再组织解决用户问题的功能实现、模块组合。</p>\n<h4 id=\"拿“简密”来说的话，需求经过后期整理文案如下：\"><a href=\"#拿“简密”来说的话，需求经过后期整理文案如下：\" class=\"headerlink\" title=\"拿“简密”来说的话，需求经过后期整理文案如下：\"></a>拿“简密”来说的话，需求经过后期整理文案如下：</h4><blockquote>\n<p>简密：秘密的创造原来可以如此简单</p>\n<p>简密是一款文本转换生成加密二维码的实用工具。用户可以把自己的秘密生成加密的二维码在你的圈子中分享，你可以将二维码的密码告诉特定的朋友，只有知道密码的他们才能扫码揭开你的秘密，了解事情的真相。当然你也可以把简密当做一个普通的二维码扫码工具来使用。用户可以针对自己的需求创造很多有意思的玩法。</p>\n</blockquote>\n<h3 id=\"App的界面原型设计\"><a href=\"#App的界面原型设计\" class=\"headerlink\" title=\"App的界面原型设计\"></a>App的界面原型设计</h3><p>因为是自己独立开发找了一块白板把整个应用的界面直接画在了上面。感觉效果还是不错的，高效简洁，画的过程整个App的基本页面以及模块划分就逐渐清晰了，这时候不用太注重细节和页面效果创意，只需要理清楚有多少个页面和功能，它们之间的关联和跳转又是怎样的，通过这样的梳理，也就为开发奠定了一个基础的页面框架了。同时这时候可以确定一下App的整体风格，拿“简密”来说就是简约扁平风格，基础色调就是黑白。同时这部分感觉应该把广告的布局考虑进去，把广告对App造成的负影响尽量降到最低。</p>\n<h3 id=\"App的程序框架搭建\"><a href=\"#App的程序框架搭建\" class=\"headerlink\" title=\"App的程序框架搭建\"></a>App的程序框架搭建</h3><p>这块没啥说的，有了需求和具体的界面布局，哪些需要自己开发，哪些可以借助第三方类库来辅助实现就比较清楚了，组织一下项目的文件结构，把需要的类库都引入完毕，然后就可以进行开发了。</p>\n<h3 id=\"App的原始需求的实现以及优化\"><a href=\"#App的原始需求的实现以及优化\" class=\"headerlink\" title=\"App的原始需求的实现以及优化\"></a>App的原始需求的实现以及优化</h3><p>拿“简密”来说基础需求不复杂，很快就可以完成了，然后就是对它进行一些力所能及的雕琢。<br>比如这部分我把“帮我解密”模块的布局模仿了一把扁平化了的锁，点击加密的时候，有锁合上的动画效果，自我感觉效果还是不错的^_^。总之发挥想象给自己的App润色。</p>\n<p>同时添加一些风格统一的图标，这里推荐下面这个网站，有很多不错的免费图片素材：</p>\n<blockquote>\n<p>easyicon:<a href=\"http://www.easyicon.net/\" target=\"_blank\" rel=\"external\">http://www.easyicon.net/</a></p>\n</blockquote>\n<h3 id=\"App全球市场的一些总结\"><a href=\"#App全球市场的一些总结\" class=\"headerlink\" title=\"App全球市场的一些总结\"></a>App全球市场的一些总结</h3><p>首先就是App文字的本地化，这点不用说用苹果官方的本地化方案就好了<br>NSLocalizedString。<br>也可以获取设备语言写一些针对不同语言的分支处理，具体判断方法如下：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span><br><span class=\"line\">NSArray *languages = [defaults objectForKey:@<span class=\"string\">\"AppleLanguages\"</span>];</span><br><span class=\"line\">NSString *currentLang = [languages objectAtIndex:<span class=\"number\">0</span>];</span><br><span class=\"line\">return currentLang;</span><br></pre></td></tr></table></figure>\n<p>同时还有一个细节就是App的CFBundleDisplayName别忘了配置一下，这能让你的应用在不同地区的设备上显示特定的语言名称。</p>\n<h3 id=\"开发证书购买\"><a href=\"#开发证书购买\" class=\"headerlink\" title=\"开发证书购买\"></a>开发证书购买</h3><p>应用基本完工前就可以开始购买证书了，流程没啥难点，就是最近苹果强制定了个人民币美元的汇率（多交40多吧），这点真是亮瞎了我的眼，苹果你这是在欺负中国人吗。。。</p>\n<p>个人的证书很快，没有发送验证码激活的过程，就有一点需要注意下，就是如果你的apple id是用中文注册的，姓名也是中文名，由于注册开发者的时候需要用英文，因此在购买证书的时候，需要有一步要你打电话给苹果的客服确认下两个名字都是你，唉。。。ok,搞定之后就可以配置证书、app id以及描述文件了。。</p>\n<h3 id=\"广告与其它第三方服务\"><a href=\"#广告与其它第三方服务\" class=\"headerlink\" title=\"广告与其它第三方服务\"></a>广告与其它第三方服务</h3><p>广告：其实这块现在也不知道怎样才是最好的选择，有经验的朋友还请多多指点，目前借鉴网上的说法，优先展现iAd,iAd加载不到才加载AdMob的广告，不过最近AdMob刚更新，真没底，大家也都比较担心更新之后的收益问题。</p>\n<p>分享：分享起初集成了友盟的分享，后来发现iOS6之后自带的分享基本就能满足我的App需求了，决定后期改成自带的分享控件。同时做一下本地化的分享列表展现处理，国内就不展现facebook和twitter了，万恶的The Great Fire Wall。</p>\n<p>推送：直接引入了腾讯的信鸽，就省去了服务器记录deviceToken的开销，免费获得一个推送功能^_^。</p>\n<h3 id=\"itunesconnect配置与元数据\"><a href=\"#itunesconnect配置与元数据\" class=\"headerlink\" title=\"itunesconnect配置与元数据\"></a>itunesconnect配置与元数据</h3><p>正规流程不多说没什么难点，该签的协议就签一下。就是上全球市场这个翻译文案真是令人头大。。。翻了3个小时就翻译了这么几行字：</p>\n<blockquote>\n<p>“Mystery”:The creation of mysteries is so simple.</p>\n<p>“Mystery” is an app that can cast text to encrypted QR Code. We can share the mysterious QR Code generated by it to our timeline.We can send the password to the target friends.The truth can only be uncovered by the people who got the password.Certainly,we can also use it just like normal QR Code scanner.We can create a lot of interesting play for their own needs ^_^</p>\n<p>Tip 1:Here we can secretly write down their predictions and share them.Time to uncover the truth,show our insights.</p>\n<p>Tip 2:The life bothered with conflicts.Finger guessing is the original method of solving conflicts.However,there’s a fair problems(Hand Speed).Let’s encrypt the game result,and swap the QR Code each other.Finally,swap the password each other and decrypt the result.The winner is clear.</p>\n<p>Tip 3:I want to private contact in some public virtual environments(such as Twitter). Just encrypt the message and exchange the password, it’s a piece of cake ^_^</p>\n<p>Tip N:……</p>\n<p>There are more interesting play waiting for you to explore.Let’s enrich it together.</p>\n<p>One should always be a little improbable.—Oscar wilde.</p>\n<p>Welcome to contact me ^_^</p>\n<p>Email:cloudsthinker@qq.com</p>\n<p>Sina Weibo:@AliThink</p>\n</blockquote>\n<p>然后就是做展示图，双语双尺寸一共20张图，又不想直接用截图，对于一个程序员来说要了命了。。。</p>\n<p>还有一点注意的就是优化关键词，感觉这块是个学问，优化的好的话对应用的影响挺大，“简密”的关键词的话，搜“神秘感”第一个就是，“保持”第三个，“简密”竟然排到了第六位，还没研究透这块，后期再优化优化。</p>\n<h3 id=\"上传审核上架\"><a href=\"#上传审核上架\" class=\"headerlink\" title=\"上传审核上架\"></a>上传审核上架</h3><p>这块的话，就是当你用Xcode传不上去的时候建议再用Application Loader试一下。</p>\n<p>同时建议估算一下available date 估计成一个审核通过之后的日期。</p>\n<p>最后，说一下近期的审核速度，给大家做个参考，最近审核速度感觉快多了，新应用上传waiting for review 4天，in review 1天多没一会就ready for sale了。</p>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>“简密”虽然不知道最后上架的效果如何，但是感觉对自己知识的梳理效果还是挺好的，以后就正式进入个人开发者行列了，多总结与大家共同进步^_^</p>\n<p>最后做个宣传把应用的下载链接发一下，有兴趣的朋友可以下载体验给评个分，有什么好的创意建议欢迎给我留言。</p>\n<p>简密 - 保持一点神秘感</p>\n<p>一个人应该永远保持一点神秘感 — 王尔德</p>\n<blockquote>\n<p><a href=\"https://itunes.apple.com/cn/app/jian-mi-bao-chi-yi-dian-shen/id879758988?mt=8\" target=\"_blank\" rel=\"external\">https://itunes.apple.com/cn/app/jian-mi-bao-chi-yi-dian-shen/id879758988?mt=8</a></p>\n</blockquote>\n"}]